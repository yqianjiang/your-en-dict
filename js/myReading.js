import{g as q,r as d,aH as N,f,o as t,i as a,j as o,t as s,k as u,F as c,l as k,I as S,al as U,m as V,q as _,x as B}from"./main.js";import{a as i}from"./articles.js";import{u as m}from"./userDict.js";import{U as C}from"./uploader.js";import"./-plugin-vue-export-helper.js";import"./counter.js";const D=_(" \u7B5B\u9009\uFF1A "),F={key:0,href:"#/my-reading"},R={key:1},H=_(" | "),L={key:0},j=["href"],E=["href"],I={key:0},M=o("hr",null,null,-1),K={__name:"myReading",setup(O){document.title="myReading - \u4F60\u7684\u5B9A\u5236\u82F1\u8BED\u8BCD\u5178";const v=q(),y=d("\u6211\u7684\u9605\u8BFB"),l=N({read:[],marked:[],local:[]}),r=f(()=>v.query.q),A=f(()=>r.value?l[r.value]:[...l.read,...l.marked,...l.local]),w=d([{tag:"read",label:"\u6B63\u5728\u6807\u8BB0"},{tag:"marked",label:"\u5DF2\u6807\u8BB0"},{tag:"local",label:"\u672C\u5730\u6587\u7AE0"}]),g=async()=>{l.read=await i.getOpenedArticles(m)||[],l.marked=await i.getMarkedArticles(m)||[],l.local=await i.getLocalArticles(m)||[]};g();const n=d(!1),b=()=>{n.value=!0},x=async h=>{await i.addArticle(h),n.value=!1,g()};return(h,p)=>(t(),a(c,null,[o("h1",null,s(y.value),1),o("div",null,[D,u(r)?(t(),a("a",F,"All")):(t(),a("span",R,"All")),(t(!0),a(c,null,k(w.value,e=>(t(),a("span",{key:e.tag},[H,u(r)===e.tag?(t(),a("span",L,s(e.label),1)):(t(),a("a",{key:1,href:"#/my-reading?q="+e.tag},s(e.label),9,j))]))),128))]),o("button",{onClick:b},"\u65B0\u589E\u6587\u7AE0"),S(V(C,{onSubmit:x,onCancel:p[0]||(p[0]=e=>n.value=!1)},null,512),[[U,n.value]]),(t(!0),a(c,null,k(u(A),e=>(t(),a("div",{key:e.uuid},[o("a",{href:"#/reading/"+e.uuid},s(e.title),9,E),o("div",null,[_(" \u5171"+s(e.totalWords)+"\u8BCD\uFF0C\u751F\u8BCD\u7387\uFF1A"+s((e.ratio*100).toFixed(2))+"% ",1),e.unseen.length?(t(),a("small",I,"("+s(e.unseen.length)+"\u8BCD\u672A\u6807\u6CE8)",1)):B("",!0)]),M]))),128))],64))}};export{K as default};
