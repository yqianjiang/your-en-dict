import{h as l,C as h,F as k,q as _,j as w,k as g,l as m,n as p,p as S}from"./main.js";function y(e,...n){if(Array.isArray(e))e.forEach(t=>y(t,...n));else return e(...n)}function i(e){return e.some(n=>l(n)?!(n.type===h||n.type===k&&!i(n.children)):!0)?e:null}function b(e,n){return e&&i(e())||n()}function x(e,n,t){return e&&i(e(n))||t(n)}function A(e,n){const t=e&&i(e());return n(t||null)}function K(e){return!(e&&i(e()))}function O(e){return e.replace(/#|\(|\)|,|\s/g,"_")}function v(e,n){if(e===void 0)return!1;if(n){const{context:{ids:t}}=n;return t.has(e)}return _(e)!==null}function R(e,n,t){if(!n)return;const r=w(),u=g(()=>{const{value:o}=n;if(!o)return;const s=o[e];if(!!s)return s}),c=()=>{p(()=>{const{value:o}=t,s=`${o}${e}Rtl`;if(v(s,r))return;const{value:W}=u;!W||W.style.mount({id:s,head:!0,anchorMetaName:S,props:{bPrefix:o?`.${o}-`:void 0},ssr:r})})};return r?c():m(c),u}const f="yourdict";function M(e){return JSON.stringify(e)}function N(e,n=""){if(!e)return n;let t="";try{t=JSON.parse(e)}catch{t=e}return t||n}function d(e,n){n!=null&&localStorage.setItem(`${f}:${e}`,M(n))}function a(e){return N(localStorage.getItem(`${f}:${e}`))}class U{constructor(){this._knownWords={},this._unknownWords={},this._seenWords={},this.targetWords=[],this.load()}get knownWords(){return Object.keys(this._knownWords)}get unknownWords(){return Object.keys(this._unknownWords)}get seenWords(){return Object.keys(this._seenWords)}get knownTargetWords(){return this.targetWords.filter(n=>n in this._knownWords)}get unknownTargetWords(){return this.targetWords.filter(n=>n in this._knownWords)}load(){this._knownWords=a("knownWords")||{},this._unknownWords=a("unknownWords")||{},this._seenWords=a("seenWords")||{},this.targetWords=a("targetWords")||[]}save(){d("knownWords",this._knownWords),d("unknownWords",this._unknownWords),d("seenWords",this._seenWords),d("targetWords",this.targetWords)}_genWordMeta(n){return{createdTime:new Date().toUTCString()}}_addKnownWord(n){this.knownWords.includes(n)||(this.unknownWords.includes(n)&&this.removeUnknownWord(n),this._knownWords[n]=this._genWordMeta(n))}_addUnknownWord(n){this.unknownWords.includes(n)||(this.knownWords.includes(n)&&(console.log("remove knownWord",n),this.removeKnownWord(n),console.log(this._knownWords[n])),this._unknownWords[n]=this._genWordMeta(n))}_addSeenWord(n,t){this.seenWords.includes(n)&&(this._seenWords[n].freq+=t),this._seenWords[n]={...this._genWordMeta(n),freq:t}}addKnownWords(n){for(const t of n)this._addKnownWord(t)}addUnknownWords(n){for(const t of n)this._addUnknownWord(t)}addSeenWords(n){for(const[t,r]of n)this._addSeenWord(t,r)}removeKnownWord(n){delete this._knownWords[n]}removeUnknownWord(n){delete this._unknownWords[n]}}const j=new U;export{R as a,y as b,O as c,b as d,x as e,a as g,K as i,A as r,d as s,j as u};
